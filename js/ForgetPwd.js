(window.webpackJsonp=window.webpackJsonp||[]).push([["ForgetPwd"],{"143c":function(e,t,n){},7729:function(e,t,n){"use strict";n.r(t),n("e7e5");var a=n("d399"),s=n("1da1"),o=(n("96cf"),n("4d63"),n("ac1f"),n("25f0"),n("c24f")),r=n("fa7d"),c={data:function(){return{email:"",code:"",password:"",password2:"",countDown:60,sendCodeText:this.$t("forgetPwd.sendBtn"),sendCodeEnable:!0}},mounted:function(){},methods:{emailValidator:function(e){return new RegExp(r.c).test(e)},sendCode:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.emailValidator(e.email)){t.next=3;break}return t.next=3,Object(o.t)({email:e.email,showLoading:!1}).then((function(){a.a.success(e.$t("forgetPwd.sentSuccess")),e.sendCodeEnable=!1,e.sendCodeText=e.$t("forgetPwd.resendBtn",[e.countDown]);var t=setInterval((function(){e.countDown>0?(e.sendCodeText=e.$t("forgetPwd.resendBtn",[e.countDown]),e.countDown--):(clearInterval(t),e.sendCodeText=e.$t("forgetPwd.sendBtn"),e.countDown=60,e.sendCodeEnable=!0)}),1e3)})).catch((function(e){Object(a.a)(e.data.msg)}));case 3:case"end":return t.stop()}}),t)})))()},resetPwd:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.password===e.password2){t.next=3;break}return Object(a.a)(e.$t("login.notSamePwd")),t.abrupt("return");case 3:return t.next=5,Object(o.q)({userId:"",email:e.email,oldPwd:"",newPwd:e.password,checkCode:e.code}).then((function(){a.a.success(e.$t("common.modifySuccess")),setTimeout((function(){e.$router.go(-1),e.$store.commit("showLoginPanel")}),1e3)})).catch((function(e){a.a.fail(e.data.msg)}));case 5:case"end":return t.stop()}}),t)})))()}}},d=(n("edbc"),n("2877")),i=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"forget-pwd-container"},[n("van-nav-bar",{staticClass:"app-nav-bar",attrs:{title:e.$t("forgetPwd.title")}},[n("div",{attrs:{slot:"left"},slot:"left"},[n("i",{staticClass:"iconfont icon-fanhui",on:{click:function(t){return e.$router.go(-1)}}})])]),n("div",{staticClass:"main-wrap"},[n("van-form",{on:{submit:e.resetPwd}},[n("van-field",{attrs:{label:e.$t("address.email"),rules:[{required:!0,validator:e.emailValidator,message:e.$t("address.emailHint")}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("van-field",{attrs:{center:"",clearable:"",label:e.$t("forgetPwd.code"),rules:[{required:!0,message:e.$t("address.codeHint")}]},scopedSlots:e._u([{key:"button",fn:function(){return[n("van-button",{attrs:{size:"small",type:"primary",disabled:!e.sendCodeEnable},on:{click:e.sendCode}},[e._v(e._s(e.sendCodeText))])]},proxy:!0}]),model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),n("van-field",{attrs:{type:"password",label:e.$t("login.password"),autocomplete:"off",rules:[{required:!0,message:e.$t("login.passwordHint")}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("van-field",{attrs:{type:"password",label:e.$t("login.confirmPassword"),autocomplete:"off",rules:[{required:!0,message:e.$t("login.passwordError")}]},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}}),n("div",{staticClass:"btn-wrap"},[n("van-button",{staticClass:"submit-btn",attrs:{"native-type":"submit",size:"large"}},[e._v(e._s(e.$t("common.resetBtn")))])],1)],1)],1)],1)}),[],!1,null,"2e6cf362",null);t.default=i.exports},edbc:function(e,t,n){"use strict";n("143c")}}]);