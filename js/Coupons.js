(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Coupons"],{"1d56":function(t,o,i){"use strict";i.r(o);var e=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"coupon-container"},[i("van-nav-bar",{staticClass:"app-nav-bar",attrs:{title:"My Coupons",fixed:""}},[i("div",{attrs:{slot:"left"},slot:"left"},[i("i",{staticClass:"iconfont icon-fanhui",on:{click:function(o){return t.$router.go(-1)}}})])]),i("div",{staticClass:"main-wrap"},[1==t.type?i("div",{staticClass:"selected-coupon-info-wrap"},[i("van-field",{attrs:{placeholder:t.$t("coupon.couponCode"),readonly:""},model:{value:t.couponCode,callback:function(o){t.couponCode=o},expression:"couponCode"}}),i("van-button",{staticClass:"remove-btn",on:{click:t.removeCoupon}},[t._v(t._s(t.$t("common.remove")))])],1):t._e(),t.loadingData?t._e():i("div",[1==t.type&&t.couponList.length>0?i("div",{staticClass:"status-label"},[t._v(t._s(t.$t("coupon.availableTitle")))]):t._e(),0==t.couponList.length&&0==t.disCouponList.length?i("div",{staticClass:"empty-wrap"},[i("van-empty",{attrs:{description:t.$t("common.emptyData"),image:t.emptyImage}},[t.isLogin?t._e():i("div",[t._v(t._s(t.$t("coupon.emptyNoLogin")))])]),i("div",{staticClass:"btn-wrap"},[t.isLogin?t._e():i("div",{staticClass:"login-btn",on:{click:t.showPopup}},[t._v(t._s(t.$t("login.loginRegister")))])])],1):t._e(),t.couponList.length>0?i("div",t._l(t.couponList,(function(o,e){return i("div",{key:o.cpId,staticClass:"coupon-item-wrap"},[i("div",{staticClass:"coupon-info-wrap",on:{click:function(o){return t.selectedCoupon(e)}}},[i("div",{staticClass:"code-info"},[i("div",{staticClass:"title"},[t._v(t._s(o.title))]),i("div",[t._v(t._s(t.$t("coupon.orderAmountHint",[o.orderamount])))]),i("div",[t._v(t._s(t.$t("coupon.code"))+": "+t._s(o.code))]),o.disamount?i("div",[t._v(t._s(t.$t("coupon.orderSaveHint"))+" "),i("span",{staticClass:"discount"},[t._v(t._s(o.disamount))])]):t._e()]),1==t.type?i("i",{class:o.code==t.couponCode?"iconfont icon-radio1":"iconfont icon-radio"}):t._e()]),i("div",{staticClass:"dash-line"}),i("ul",[o.validtime&&o.validtime.length>0?i("li",{staticClass:"hint"},[t._v(t._s(o.validtime[0])+" ~ "+t._s(o.validtime[1]))]):t._e(),0==o.pflg?i("li",{staticClass:"hint"},[t._v(t._s(t.$t("coupon.allProduct")))]):t._e()])])})),0):t._e(),1==t.type&&t.disCouponList.length>0?i("div",[i("div",{staticClass:"status-label"},[t._v(t._s(t.$t("coupon.noavailableTitle")))]),t._l(t.disCouponList,(function(o){return i("div",{key:o.cpId,staticClass:"coupon-item-wrap"},[i("div",{staticClass:"coupon-info-wrap"},[i("div",{staticClass:"code-info"},[i("div",{staticClass:"title"},[t._v(t._s(o.title))]),i("div",[t._v(t._s(t.$t("coupon.orderAmountHint",[o.orderamount])))]),i("div",[t._v(t._s(t.$t("coupon.code"))+": "+t._s(o.code))]),o.disamount?i("div",[t._v(t._s(t.$t("coupon.orderSaveHint"))+" "),i("span",{staticClass:"discount"},[t._v(t._s(o.disamount))])]):t._e()])]),i("div",{staticClass:"dash-line"}),i("ul",[o.validtime&&o.validtime.length>0?i("li",{staticClass:"hint"},[t._v(t._s(o.validtime[0])+" ~ "+t._s(o.validtime[1]))]):t._e(),0==o.pflg?i("li",{staticClass:"hint"},[t._v(t._s(t.$t("coupon.allProduct")))]):t._e()])])}))],2):t._e()])])],1)},s=[],n=i("1da1"),a=(i("96cf"),i("159b"),i("c24f")),c=i("fa7d"),u={data:function(){return{type:this.$route.query.type?this.$route.query.type:0,couponCode:"-1"===this.$store.state.selectedCouponCode?"":this.$store.state.selectedCouponCode,couponList:[],disCouponList:[],loadingData:!1,emptyImage:i("31eb")}},created:function(){this.$store.state.user&&(this.loadingData=!0,this.requestCouponList())},computed:{isLogin:function(){return null!=this.$store.state.user}},watch:{isLogin:function(){this.isLogin&&this.requestCouponList()}},methods:{requestCouponList:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Object(a["h"])({userId:t.$store.state.user.userId,currencyId:t.$store.state.currentCurrency.currencyCode,fromspc:0===t.type?0:1});case 2:i=o.sent,i.avas&&(i.avas.forEach((function(t){if(t.validtime)for(var o=0;o<t.validtime.length;o++)t.validtime[o]=Object(c["m"])(t.validtime[o])})),t.couponList=i.avas),i.unavas&&(i.unavas.forEach((function(t){if(t.validtime)for(var o=0;o<t.validtime.length;o++)t.validtime[o]=Object(c["m"])(t.validtime[o])})),t.disCouponList=i.unavas),t.loadingData=!1;case 6:case"end":return o.stop()}}),o)})))()},selectedCoupon:function(t){"1"===this.type&&(this.couponCode?(this.couponCode="",this.$store.commit("setSelectedCoupon","-1"),this.$router.go(-1)):(this.couponCode=this.couponList[t].code,this.$store.commit("setSelectedCoupon",this.couponCode),this.$router.go(-1)))},removeCoupon:function(){this.isLogin&&(this.couponCode="",this.$store.commit("setSelectedCoupon","-1"),this.$router.go(-1))},showPopup:function(){this.$store.commit("showLoginPanel")}}},d=u,r=(i("8acd"),i("2877")),l=Object(r["a"])(d,e,s,!1,null,"61a272db",null);o["default"]=l.exports},"31eb":function(t,o,i){t.exports=i.p+"img/custom-empty-image.png"},4357:function(t,o,i){},"8acd":function(t,o,i){"use strict";i("4357")}}]);