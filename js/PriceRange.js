(window.webpackJsonp=window.webpackJsonp||[]).push([["PriceRange"],{"2d5d":function(t,r,e){"use strict";e("a9e3"),e("b680"),e("2ca0"),e("ac1f"),e("5319");var c=e("fa7d"),a={name:"ProductItemForPrice",props:{data:{type:Object,required:!0}},data:function(){return{}},mounted:function(){},computed:{productImage:function(){return this.data.img_display?c.f+this.data.img_display:c.f+this.data.imgDisplay},productSalePrice:function(){return this.data.current_price?Object(c.n)(this.data.current_price,this.$store.state.currentCurrency):this.data.dispcurPrice?Object(c.n)(this.data.dispcurPrice,this.$store.state.currentCurrency):Object(c.n)(this.data.curPrice,this.$store.state.currentCurrency)},productOldPrice:function(){return this.data.original_price?Object(c.n)(this.data.original_price,this.$store.state.currentCurrency):this.data.dispOrgPrice?Object(c.n)(this.data.dispOrgPrice,this.$store.state.currentCurrency):Object(c.n)(this.data.orgPrice,this.$store.state.currentCurrency)},productPriceOff:function(){try{var t=Number(this.data.original_price)||Number(this.data.orgPrice);return"-"+(100-100*(Number(this.data.current_price)||Number(this.data.curPrice))/(100*t)*100).toFixed(0)+"%"}catch(t){return""}}},methods:{toProductDetail:function(){this.$route.path.startsWith("/detail")&&this.data.productId?(this.$router.replace("/detail/"+Object(c.l)(this.data.productId)+"/"+Object(c.l)(this.data.productColorId)),document.body.scrollTop=document.documentElement.scrollTop=0):this.data.productId?this.$router.push("/detail/"+Object(c.l)(this.data.productId)+"/"+Object(c.l)(this.data.productColorId)):this.$router.push("/detail/"+Object(c.l)(this.data.product_id)+"/"+Object(c.l)(this.data.color_id))},showDetailPop:function(t){t.stopPropagation(),this.$emit("showDetailPop",this.data)}}},o=(e("e086"),e("2877")),i=Object(o.a)(a,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"product-item",on:{click:t.toProductDetail}},[e("div",{staticClass:"product-image-wrap"},[e("van-image",{staticClass:"product-image",attrs:{src:t.productImage,alt:t.data.prdName||t.data.pcName||t.data.productName,"lazy-load":""},scopedSlots:t._u([{key:"loading",fn:function(){return[e("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}])})],1),e("div",{staticClass:"product-text-wrap"},[e("div",{staticClass:"label-wrap"},[1==t.data.new_wf?e("div",{staticClass:"new-label"},[t._v(t._s(t.$t("common.newLabel")))]):t._e(),1==t.data.new_wf?e("br"):t._e(),t.productSalePrice!=t.productOldPrice?e("div",{staticClass:"off-label"},[t._v(t._s(t.productPriceOff))]):t._e()]),e("div",{staticClass:"product-name van-multi-ellipsis--l2"},[t._v(t._s(t.data.prdName||t.data.pcName||t.data.productName))]),e("div",{staticClass:"price-wrap"},[e("div",{staticClass:"van-ellipsis"},[e("span",{staticClass:"sale-price"},[t._v(t._s(t.productSalePrice))]),e("del",{staticClass:"old-price"},[t._v(t._s(t.productOldPrice))])]),t.data.product_id?e("i",{staticClass:"iconfont icon-jiarugouwuche",on:{click:function(r){return t.showDetailPop(r)}}}):t._e()])])])}),[],!1,null,"5f3c0d88",null);r.a=i.exports},"31eb":function(t,r,e){t.exports=e.p+"img/custom-empty-image.png"},"3ecc":function(t,r,e){"use strict";e("c9e6")},"5ed5":function(t,r,e){},"82f3":function(t,r,e){},"99af4":function(t,r,e){"use strict";var c=e("23e7"),a=e("d039"),o=e("e8b5"),i=e("861d"),n=e("7b0b"),u=e("50c4"),s=e("8418"),d=e("65f0"),l=e("1dde"),p=e("b622"),f=e("2d00"),h=p("isConcatSpreadable"),m=f>=51||!a((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=l("concat"),P=function(t){if(!i(t))return!1;var r=t[h];return void 0!==r?!!r:o(t)};c({target:"Array",proto:!0,forced:!m||!g},{concat:function(t){var r,e,c,a,o,i=n(this),l=d(i,0),p=0;for(r=-1,c=arguments.length;r<c;r++)if(P(o=-1===r?i:arguments[r])){if(p+(a=u(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(e=0;e<a;e++,p++)e in o&&s(l,p,o[e])}else{if(p>=9007199254740991)throw TypeError("Maximum allowed index exceeded");s(l,p++,o)}return l.length=p,l}})},b18d:function(t,r,e){"use strict";e("82f3")},c4c8:function(t,r,e){"use strict";e.d(r,"m",(function(){return a})),e.d(r,"k",(function(){return o})),e.d(r,"l",(function(){return i})),e.d(r,"b",(function(){return n})),e.d(r,"a",(function(){return u})),e.d(r,"o",(function(){return s})),e.d(r,"j",(function(){return d})),e.d(r,"i",(function(){return l})),e.d(r,"d",(function(){return p})),e.d(r,"c",(function(){return f})),e.d(r,"g",(function(){return h})),e.d(r,"e",(function(){return m})),e.d(r,"f",(function(){return g})),e.d(r,"h",(function(){return P})),e.d(r,"n",(function(){return v}));var c=e("b775"),a=function(t){return Object(c.a)({url:"/productsbymenuandtag",data:t})},o=function(t){return Object(c.a)({url:"/menucustomcontent",data:t})},i=function(t){return Object(c.a)({url:"/product_detail",data:t})},n=function(t){return Object(c.a)({url:"/getallviewofprd",data:t})},u=function(t){return Object(c.a)({url:"/attention",data:t})},s=function(t){return Object(c.a)({url:"/search_products",data:t})},d=function(t){return Object(c.a)({url:"/products_rel",data:t})},l=function(t){return Object(c.a)({url:"/getmenuadscnt",data:t})},p=function(t){return Object(c.a)({url:"/countproduct",data:t})},f=function(t){return Object(c.a)({url:"/filterattrbysearchkey",data:t})},h=function(t){return Object(c.a)({url:"/flashsalesummry",data:t})},m=function(t){return Object(c.a)({url:"/flashsalefilter",data:t})},g=function(t){return Object(c.a)({url:"/flashsaleproducts",data:t})},P=function(t){return Object(c.a)({url:"/curflashsaleproducts",data:t})},v=function(t){return Object(c.a)({url:"/listimgwall",data:t})}},c9e6:function(t,r,e){},cf78:function(t,r,e){"use strict";e("e7e5");var c=e("d399"),a=e("1da1"),o=(e("96cf"),e("159b"),e("fa7d")),i=e("c4c8"),n=e("2166"),u=e("5d2d"),s={name:"ProductDetailPanel",props:{productId:{type:String},productColorId:{type:String},close:{type:Function}},data:function(){return{productInfo:{},currentProduct:null,productNumber:1}},watch:{productId:function(){this.getProductDetail()}},computed:{productImageList:function(){return this.currentProduct&&this.currentProduct.img_groups?(this.currentProduct.img_groups.forEach((function(t){t.big_img=o.f+t.big_img})),this.currentProduct.img_groups):[]},productSalePrice:function(){return this.currentProduct.original_price?Object(o.n)(this.currentProduct.current_price,this.$store.state.currentCurrency):""},productOldPrice:function(){return this.currentProduct.current_price?Object(o.n)(this.currentProduct.original_price,this.$store.state.currentCurrency):""},showColorWrap:function(){var t=this.$store.state.systemInfo;return!(!t||"1"!==t.img_block&&"2"!==t.img_block)}},created:function(){this.getProductDetail()},methods:{getProductDetail:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function r(){var e;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(i.l)({currencyId:t.$store.state.currentCurrency.currencyCode,productId:t.productId,userId:t.$store.state.user?t.$store.state.user.userId:null});case 2:e=r.sent,t.productInfo=e,t.productInfo.color_data.forEach((function(r){r.color_img=o.f+r.color_img,r.img_display=o.f+r.img_display,r.color_id===t.productColorId&&(t.currentProduct=r)}));case 5:case"end":return r.stop()}}),r)})))()},chooseAttrItem:function(t,r,e){this.$set(this.currentProduct.dyn_attrs[r],"selectedAttr",{attrOptId:t.domain_list[e].optId,attrType:t.attrID,attrString:t.attr_name+":"+t.domain_list[e].optName})},toProductDetail:function(){this.close(),this.$router.push("/detail/"+Object(o.l)(this.productId)+"/"+Object(o.l)(this.currentProduct.color_id))},addProductToBag:function(){for(var t=[],r=0;r<this.currentProduct.dyn_attrs.length;r++){var e=this.currentProduct.dyn_attrs[r];if(!e.selectedAttr)return void Object(c.a)(this.$t("detail.noSelectedAttr",[e.attr_name]));t.push(e.selectedAttr)}this.$store.state.user?this.addProductForUser(t):this.addProductForLocal(t)},addProductForUser:function(t){var r=[{userId:this.$store.state.user.userId,productName:this.currentProduct.pcName,productImage:this.currentProduct.img_display,productId:this.productId,productColorId:this.currentProduct.color_id,productNum:this.productNumber,attrOpts:t}];this.requestAddProductToBag(r)},addProductForLocal:function(t){var r={productName:this.currentProduct.pcName,productImage:this.currentProduct.img_display,productId:this.productId,productColorId:this.currentProduct.color_id,productNum:this.productNumber,attrOpts:t},e=Object(u.u)(u.o);if(e){for(var a=-1,o=0;o<e.length;o++){var i=e[o];if(this.isSameProduct(r,i)){a=o;break}}-1===a?e.push(r):e[a].productNum=e[a].productNum+this.productNumber,Object(u.x)(u.o,JSON.stringify(e))}else Object(u.x)(u.o,[r]);this.$store.commit("setCartProductNumber",this.$store.state.cartProductNumber+this.productNumber),c.a.success(this.$t("common.addSuccess")),this.close()},isSameProduct:function(t,r){if(t.productId!==r.productId||t.productColorId!==r.productColorId)return!1;if(t.attrOpts.length!==r.attrOpts.length)return!1;for(var e=0;e<t.attrOpts.length;e++){var c=t.attrOpts[e],a=r.attrOpts[e];if(c.attrType!==a.attrType||c.attrOptId!==a.attrOptId)return!1}return!0},requestAddProductToBag:function(t){var r=this;return Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)({inputParams:JSON.stringify(t),userid:r.$store.state.user?r.$store.state.user.userId:null}).then((function(){c.a.success(r.$t("common.addSuccess")),r.close(),r.$store.commit("setCartProductNumber",r.$store.state.cartProductNumber+r.productNumber)})).catch((function(){c.a.success(r.$t("common.addFail"))}));case 2:case"end":return e.stop()}}),e)})))()},colorItemClick:function(t){this.currentProduct=this.productInfo.color_data[t]}}},d=(e("3ecc"),e("2877")),l=Object(d.a)(s,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return t.currentProduct?e("div",{staticClass:"product-detail-container"},[e("div",{staticClass:"product-infor-wrap"},[e("div",{staticClass:"product-image-wrap"},t._l(t.productImageList,(function(r,c){return e("div",{key:c},[e("van-image",{staticClass:"product-image",attrs:{src:r.big_img,alt:t.currentProduct.pcName},scopedSlots:t._u([{key:"loading",fn:function(){return[e("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)})],1)})),0),e("div",{staticClass:"product-info-wrap"},[e("div",{staticClass:"product-name-wrap"},[e("div",{staticClass:"product-name"},[t._v(t._s(t.currentProduct.pcName))])]),e("div",{staticClass:"product-price-wrap"},[e("div",{staticClass:"price-wrap"},[e("span",[t._v(t._s(t.productSalePrice))]),e("del",[t._v(t._s(t.productOldPrice))])]),e("div",{staticClass:"detail-wrap",on:{click:t.toProductDetail}},[e("span",[t._v(t._s(t.$t("detail.detailLabel")))]),e("i",{staticClass:"iconfont icon-xiangyou1"})])])]),t.showColorWrap?e("div",{staticClass:"product-color-wrap"},[e("div",{staticClass:"title-wrap"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("detail.colorTitle")))])]),t._l(t.productInfo.color_data,(function(r,c){return e("div",{key:r.color_id,staticClass:"color-image-wrap",on:{click:function(r){return t.colorItemClick(c)}}},[e("van-image",{class:{selected:t.currentProduct.color_id==r.color_id},attrs:{src:r.color_img,alt:"colorItem.pcName"},scopedSlots:t._u([{key:"loading",fn:function(){return[e("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)})],1)}))],2):t._e(),t._l(t.currentProduct.dyn_attrs,(function(r,c){return e("div",{key:r.attrID,staticClass:"product-size-wrap"},[e("div",{staticClass:"title-wrap"},[e("div",{staticClass:"title"},[t._v(t._s(r.attr_name))])]),e("div",{staticClass:"size-wrap"},t._l(r.domain_list,(function(a,o){return e("div",{key:a.optId,staticClass:"size-item",class:{selected:r.selectedAttr&&r.selectedAttr.attrOptId==a.optId},on:{click:function(e){return t.chooseAttrItem(r,c,o)}}},[t._v(t._s(a.optName))])})),0)])}))],2),e("div",{staticClass:"add-btn",on:{click:t.addProductToBag}},[t._v(t._s(t.$t("detail.addToBagBtn")))])]):t._e()}),[],!1,null,"38f32f28",null);r.a=l.exports},d9d8:function(t,r,e){"use strict";e.r(r);var c=e("1da1"),a=(e("99af4"),e("96cf"),e("2166")),o=e("2d5d"),i=e("cf78"),n={components:{ProductItemForPrice:o.a,ProductDetailPanel:i.a},data:function(){return{productList:[],loading:!1,finished:!1,currentPage:0,pageInfo:{},categoryValue:"",optionCategory:[],priceValue:"",optionPrice:[],showDetailsPop:!1,currentProductId:null,currentProductColorId:null,emptyImage:e("31eb")}},created:function(){this.getPriceTab()},methods:{getPriceTab:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var e,c,o,i,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(a.d)({currencyId:t.$store.state.currentCurrency.currencyCode});case 2:for(e=r.sent,c=0;c<e.length;c++)for((o=e[c]).text=o.disp,o.value=c,i=0;i<o.cats.length;i++)n=o.cats[i],0===i&&(n.des="ALL"),n.text=n.des+"("+n.number+")",n.value=n.catid;t.optionPrice=e,t.priceValue=t.optionPrice[0].value,t.optionCategory=t.optionPrice[t.priceValue].cats,t.categoryValue=t.optionPrice[t.priceValue].cats[0].value,t.getProductByCatId();case 9:case"end":return r.stop()}}),r)})))()},getProductByCatId:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var e;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(a.e)({currencyId:t.$store.state.currentCurrency.currencyCode,currentPage:t.currentPage,from:t.optionPrice[t.priceValue].from,to:t.optionPrice[t.priceValue].to,typeId:t.categoryValue,showLoading:!1});case 2:e=r.sent,1===t.currentPage&&(t.pageInfo=JSON.parse(JSON.stringify(e.page)),t.productList=[]),t.productList=t.productList.concat(e.products),t.loading=!1;case 6:case"end":return r.stop()}}),r)})))()},onLoad:function(){this.productList.length>=this.pageInfo.amount?this.finished=!0:(this.currentPage=this.currentPage+1,this.getProductByCatId())},categoryValueChange:function(){this.loadFirstPage()},priceValueChange:function(){this.optionCategory=this.optionPrice[this.priceValue].cats,this.categoryValue=this.optionPrice[this.priceValue].cats[0].value,this.loadFirstPage()},loadFirstPage:function(){this.currentPage=1,this.loading=!1,this.finished=!1,this.getProductByCatId(),document.getElementById("app").scrollIntoView()},showDetailByIndex:function(t){this.showDetailsPop=!0,this.currentProductId=t.product_id,this.currentProductColorId=t.color_id},hideDetailPop:function(){this.showDetailsPop=!1}}},u=(e("b18d"),e("2877")),s=Object(u.a)(n,(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"price-range-container"},[e("van-sticky",[e("van-nav-bar",{staticClass:"app-nav-bar",attrs:{title:t.$t("bag.addItemsTitle")}},[e("div",{staticClass:"left-wrap",attrs:{slot:"left"},slot:"left"},[e("i",{staticClass:"iconfont icon-fanhui",on:{click:function(r){return t.$router.go(-1)}}})]),e("div",{staticClass:"left-wrap",attrs:{slot:"right"},slot:"right"},[e("i",{staticClass:"iconfont icon-gouwudai",on:{click:function(r){return t.$router.go(-1)}}})])]),e("div",[e("van-dropdown-menu",{attrs:{"active-color":"#f2270c"}},[e("van-dropdown-item",{attrs:{options:t.optionPrice,title:t.$t("bag.addItemsPrice")},on:{change:t.priceValueChange},model:{value:t.priceValue,callback:function(r){t.priceValue=r},expression:"priceValue"}}),e("van-dropdown-item",{attrs:{options:t.optionCategory,title:t.$t("bag.addItemsCategory")},on:{change:t.categoryValueChange},model:{value:t.categoryValue,callback:function(r){t.categoryValue=r},expression:"categoryValue"}})],1)],1)],1),t.productList&&t.productList.length>0?e("van-list",{staticClass:"add-items-wrap",attrs:{finished:t.finished,"immediate-check":!1,offset:"10"},on:{load:t.onLoad},model:{value:t.loading,callback:function(r){t.loading=r},expression:"loading"}},t._l(t.productList,(function(r,c){return e("ProductItemForPrice",{key:c,attrs:{data:r},on:{showDetailPop:t.showDetailByIndex}})})),1):t._e(),t.productList&&0!=t.productList.length?t._e():e("div",{staticClass:"empty-wrap"},[e("van-empty",{attrs:{description:t.$t("common.emptyData"),image:t.emptyImage}})],1),e("van-popup",{style:{height:"80%",width:"100%"},attrs:{closeable:"",position:"bottom"},model:{value:t.showDetailsPop,callback:function(r){t.showDetailsPop=r},expression:"showDetailsPop"}},[e("ProductDetailPanel",{attrs:{productId:t.currentProductId,productColorId:t.currentProductColorId,close:t.hideDetailPop}})],1)],1)}),[],!1,null,"5f499176",null);r.default=s.exports},e086:function(t,r,e){"use strict";e("5ed5")}}]);